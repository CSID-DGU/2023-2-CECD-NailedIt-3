# elastalert/rules/ph_rule.yaml
name: "PH Level Alert"
type: "metric_aggregation"
index: "we_are_happy2"
metric_agg_key: "pH"
metric_agg_type: "max"
query_key: "pH"
doc_type: "_doc"
bucket_interval:
  minutes: 1
sync_bucket_interval: true
realert:
  minutes: 1
max_threshold: 8.5
filter:
- range:
    pH:
      gt: 8.5
alert:
- "post"
http_post_url: "https://asia-northeast3-nailed-it-424108.cloudfunctions.net/api/v1/notifications"
http_post_static_payload:
  content: "이상 값 탐지. PH 값이 8.0을 초과했습니다."
http_post_headers:
    Content-Type: "application/json"

# https://asia-northeast3-nailed-it-424108.cloudfunctions.net/api/v1/notifications